{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/dynamic-filtering-with-vuejs-and-rmarkdown","result":{"data":{"post":{"slug":"/dynamic-filtering-with-vuejs-and-rmarkdown","title":"Managing asynchronous backend tasks with Django and Celery","date":"08.07.2020","tags":[{"name":"Python","slug":"python"},{"name":"Django","slug":"django"}],"description":null,"canonicalUrl":"https://oisinbates.com","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Managing asynchronous backend tasks with Django and Celery\",\n  \"date\": \"2020-07-08T00:00:00.000Z\",\n  \"tags\": [\"Python\", \"Django\"],\n  \"slug\": \"/dynamic-filtering-with-vuejs-and-rmarkdown\",\n  \"canonicalUrl\": \"https://oisinbates.com\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I recently encountered a use-case that required the management of multiple long-running backend tasks while also necessitating granular updates on the state and progress of each task. The feature was to be integrated into an existing Django codebase and our team desired a UI with multiple progress bars. Ultimately, I couldn\\u2019t find a tutorial covering quite what I was looking for, so my purpose here is to create the type of code demo and tutorial that I would have wanted for my specific needs, when beginning this journey. One popular tool for Python developers is \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://www.celeryproject.org/\"\n  }, \"Celery\"), \", a \\u2018task queue\\u2019 which facilitates the queuing and concurrent execution of multiple tasks (i.e. any manner of Python function you may need to run). \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/czue/celery-progress\"\n  }, \"Celery-Progress\"), \", is a great Python package for \\u2014 you guessed it \\u2014 easily provisioning progress bars to monitor Celery tasks.\"), mdx(\"p\", null, \"So, what will this app cover? At a high level, the creation of a Django app which concurrently runs eight backend processes and provides state updates via progress bars and related metadata. In terms of showcasing Celery, I opted to go with something visually stimulating and poll the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://api.nasa.gov/\"\n  }, \"NASA Astronomy Image of the Day API\"), \" forty times. Querying an API once is of course a short task on its own, but the logic outlined in this demo could be applied to any long-running task. If you\\u2019d rather jump straight into the finished codebase, you can clone a working example directly from \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/oisinBates/celery_progress_demo\"\n  }, \"GitHub\"), \". Below is an example of the project we will be building, and you can check out a screen-recording of the app in progress \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.youtube.com/watch?v=dWAJru1xx34\"\n  }, \"here\"), \".\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"57.08333333333333%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/0lEQVQoz22RfUzUdRzHv7W1WSsMJ/OBlrPZmEOnWZl3txzEaPpTlg+pKMednD/owYYQVqO7m0IXO+WOLjw8HPnA1I2dVzOaN7AkXQt82MLaiqYCMuFywh3m/X63u4Pj1fix+Vef7b33+/Pa+6/PR7jcHho8jbgaPByo+ULzI03NOL50crjezVeeRlqOn+TTaitG8x6KjCY2bd5K5cf7+eZsG4eaW/CeaqXGUcfRo80IWZYxm814vV58Ph+dnR2Yik3MnZtBdvZy5qTPYbfZxLr1Ek889QzPp80m7bk0SiwWzrWe5M1iIwXOOlYZd2KvOYgw6HUIIcjMXIhBr6epyYskSRpb/FKW5tO7waDX8pNCMEsI3pYkjtmt5OhW87JcyqtVFdgbPYgDNXUUFctY5A94d9su3A1fU1JiYcGChSzNyuLFFzKRLRZqHU42bdlOkdGMaWcxrno3bafPkFNaxg6Xi9WFhVhtdkRvaIqf+ye5MZIiCaSAX/4O4+8ZJtgbYnhsnIdqjN9GUly6M8H1exP8m5rpXfzzAS2X+2nrGaK7t4+BkQeIPwZHab86QPD6IBeuDfLXUJiu7m6O+wP424Oc8H9LV3cPo4+i3B0dY2gswr3wOGFFJQ4o05pCy5OAuHLzPp5AH6c6+6lvvcqvN26Tm5vD8oxn+dyoZ9mieeh0Bv5vvj8X4JinkeYjPnweL4E2PyLw3XmqbVYchw9RXlnBD+3nkaT1rF2UzofvrCT3tRWs0Rmw26zk5+dRsa+cjRs3YLXZKJC2kP50Bq8vXsWS+SvJe6sAEez4iYO1dTicLqqtdoLBDqo+s5K7Np+9u0vJz9vAvopK5LK9ZGW/wrZCM2+s0fNJVRX22ga27nqfPXI575V9hNPpRly7q9LR94jLdxSGlUkeJlLcDCW4eEvl0u0oITWFOgW//5Okqz+u9UaTMzfrDSX48ZbClQGVyMQUsekbqokEEUVhXFG0b8aSEyjxOJFoVGPjagw1kdRY+DFTH7NIVJmREkOJJ/kPahJfoQ1FvgIAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Webapp Screenshot\",\n    \"title\": \"Webapp Screenshot\",\n    \"src\": \"/static/9f55882e1d858c3f9c5b9cacd5aadf59/7d769/webapp_screenshot.png\",\n    \"srcSet\": [\"/static/9f55882e1d858c3f9c5b9cacd5aadf59/5243c/webapp_screenshot.png 240w\", \"/static/9f55882e1d858c3f9c5b9cacd5aadf59/ab158/webapp_screenshot.png 480w\", \"/static/9f55882e1d858c3f9c5b9cacd5aadf59/7d769/webapp_screenshot.png 960w\", \"/static/9f55882e1d858c3f9c5b9cacd5aadf59/87339/webapp_screenshot.png 1440w\", \"/static/9f55882e1d858c3f9c5b9cacd5aadf59/88b03/webapp_screenshot.png 1920w\", \"/static/9f55882e1d858c3f9c5b9cacd5aadf59/c71fc/webapp_screenshot.png 2880w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"For those wishing to jump to a specific topic, the topics are structured in the following order:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#web-application-architecture\"\n  }, \"Web Application Architecture\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#initial-django-configuration\"\n  }, \"Initial Django Configuration\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#configuring-celery\"\n  }, \"Configuring Celery and Celery-Progress\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#frontend-logic-and-templates\"\n  }, \"Frontend Logic and Templates\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#running-final-app\"\n  }, \"Running the final app and general parting thoughts\"))), mdx(\"h3\", {\n    id: \"web-application-architecture\"\n  }, \"Web Application Architecture\"), mdx(\"p\", null, \"This web app is built with the Django framework. It uses a NASA API to retrieve random images and image metadata. The processes of concurrently/repeatedly polling this API is managed by a task queue (Celery) which queues tasks via a message broker (RabbitMQ) and writes the state of each task to a database cache (Redis). The visualization of the tasks is managed by a Python package named celery-progress. This package, though written in Python, uses JavaScript on the frontend to poll our Redis cache for the current state of our Celery tasks.\"), mdx(\"p\", null, \"Here is a high-level overview of the architecture we\\u2019ll be implementing:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"327px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"172.08333333333334%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,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')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Architecture Diagram\",\n    \"title\": \"Architecture Diagram\",\n    \"src\": \"/static/88cb07f71661a701341df3aa977136bc/d7b56/architecture_diagram.png\",\n    \"srcSet\": [\"/static/88cb07f71661a701341df3aa977136bc/5243c/architecture_diagram.png 240w\", \"/static/88cb07f71661a701341df3aa977136bc/d7b56/architecture_diagram.png 327w\"],\n    \"sizes\": \"(max-width: 327px) 100vw, 327px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"h3\", {\n    id: \"initial-django-configuration\"\n  }, \"Initial Django Configuration\"), mdx(\"p\", null, \"The following commands will create a Python \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.python.org/3/library/venv.html\"\n  }, \"virtual environment\"), \" with all the necessary packages, before creating a new Django project and app, and starting a webserver to host the project.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"# Create a new virtual environment and folder for this demo\\nmkdir celery_demo \\ncd celery_demo \\npython3 -m venv myvenv \\nsource myvenv/bin/activate \\n\\n# install the necessary requirements via pip\\npython3 -m pip install --upgrade pip \\nprintf \\\"celery==4.4.2\\\\ncelery-progress==0.0.10\\\\nDjango==3.0.6\\\\nnasapy==0.2.6\\\\npandas==1.0.3\\\\npython-decouple==3.3\\\\nrequests==2.23.0\\\" >> requirements.txt \\npython3 -m pip install -r requirements.txt \\n\\n# Create a new Django project and app \\ndjango-admin startproject demo_project \\ncd demo_project/ \\npython3 manage.py startapp demo_app \\n\\n# Serve the new Django app\\npython3 manage.py runserver\\n\")), mdx(\"p\", null, \"Once you have run the above commands, navigate to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://127.0.0.1:8000/\"\n  }, \"http://127.0.0.1:8000/\"), \" in your web browser and you should see the following:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"62.5%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+ElEQVQoz6WSWU7DQBBEff+bBIgM3gLBR0BIfHABBMTYCnY8PZunF2RIEEJGxFCqj56Pp9JUd/T8su3A3t7dLxbx6TJJ83VaXGdFmRVlvhpdXJbFau/4vLhIr5JsfbJMzuI8knc5DkBeZmoPI9EQAiLhDwoHH0SIFMk/NA0zs4hsnQ5En89jYREh4pvmwYRhXrL3HkB3u14r6NqdUmCtnQyfgJ1zTdPUdb2pqqe6eqw3ADDvz8yMiB/DvMIm+/sj/EsyM5vBgTPKGWIiZu2tssaG8ezc4JWz2n2vLToshnoDr6pvoUca76yDcdbeiQgY3ULfgQqIX+E3vS3zFl6lUdcAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Django Installation Confirmation\",\n    \"title\": \"Django Installation Confirmation\",\n    \"src\": \"/static/b244be96288df4b62608758d5fbfdc8f/7d769/django_installation_confirmation.png\",\n    \"srcSet\": [\"/static/b244be96288df4b62608758d5fbfdc8f/5243c/django_installation_confirmation.png 240w\", \"/static/b244be96288df4b62608758d5fbfdc8f/ab158/django_installation_confirmation.png 480w\", \"/static/b244be96288df4b62608758d5fbfdc8f/7d769/django_installation_confirmation.png 960w\", \"/static/b244be96288df4b62608758d5fbfdc8f/4af54/django_installation_confirmation.png 1400w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"h3\", {\n    id: \"configuring-celery\"\n  }, \"Configuring Celery and Celery-Progress\"), mdx(\"p\", null, \"Having provisioned a new Django project, we can now begin adding our desired functionality. First off, let\\u2019s configure celery and celery progress. Create a new file called celery.py within our Django project (ie. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"celery_demo/demo_project/demo_project/celery.py\"), \").\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"from __future__ import absolute_import, unicode_literals\\nfrom celery import Celery\\nfrom decouple import config\\nimport django\\nimport os\\n\\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'demo_project.settings')\\n\\napp = Celery('demo_project', backend='redis://localhost', broker='pyamqp://')\\n\\n# Using a string here means the worker doesn't have to serialize\\n# the configuration object to child processes.\\n# - namespace='CELERY' means all celery-related configuration keys\\n#   should have a `CELERY_` prefix.\\napp.config_from_object('django.conf:settings', namespace='CELERY')\\n\\n# Load task modules from all registered Django app configs.\\napp.autodiscover_tasks()\\n\\n@app.task(bind=True)\\ndef debug_task(self):\\n    print('Request: {0!r}'.format(self.request))\\n\")), mdx(\"p\", null, \"In order to track the state of our tasks, it\\u2019s necessary to configure Celery\\u2019s \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.celeryproject.org/en/v4.0.1/userguide/configuration.html#result-backend\"\n  }, \"result backend\"), \". If we were setting this value via a config file, we would set a value for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"results_backend\"), \", but since we\\u2019re setting it directly when initializing our Celery app, we can just set the value via a parameter named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"backend\"), \". If you have already had some exposure to Celery, one design choice that may stand out to you is the use of RabbitMQ for Celery\\u2019s message broker but not for the results backend.\"), mdx(\"p\", null, \"I\\u2019ll approach this topic with both a short answer and a longer answer for those wishing for a lower-level explanation.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Short Answer:\"), \" Due to how the celery-progress package works, asynchronous tasks will fail with RabbitMQ but will work with Redis.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Long Answer:\"), \" Celery has both an \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol\"\n  }, \"Advanced Message Queuing Protocol\"), \" (AMQP) and a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://en.wikipedia.org/wiki/Remote_procedure_call\"\n  }, \"Remote Procedure Call\"), \" (RPC) backend. \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://patrick.cloke.us/posts/2019/10/04/celery-amqp-backends/\"\n  }, \"This blog post\"), \" provides a good explanation of the design in terms of the limitations of each backend with regards Celery. \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.celeryproject.org/en/stable/internals/reference/celery.backends.amqp.html\"\n  }, \"Celery\\u2019s AMQP backend is now deprecated\"), \" though and its documentation advises the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.celeryproject.org/en/stable/internals/reference/celery.backends.rpc.html\"\n  }, \"RPC backend\"), \" for those wishing to use RabbitMQ for their results backend. The issue with the RPC backend is that, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.celeryproject.org/en/latest/userguide/tasks.html#rpc-result-backend-rabbitmq-qpid\"\n  }, \"in the words of Celery\\u2019s documentation\"), \", \\u201Cit doesn\\u2019t actually store the states, but rather sends them as messages. This is an important difference as it means that a result can \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"only be retrieved once\"), \", and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"only by the client that initiated the task\"), \"\\u201D. As a consequence, celery-progress fails to successfully pull all task states once the user adds multiple concurrent tasks.\"), mdx(\"p\", null, \"An alternative for our Celery backend, that will support concurrent tasks, is Redis. This combination is framed as a \\u2018popular choice\\u2019 in celery\\u2019s documentation as RabbitMQ is less prone to data loss. In terms of choosing a message broker, Celery\\u2019s documentation warns \\u201CRedis is also feature-complete, but is more susceptible to data loss in the event of abrupt termination or power failures.\\u201D Depending on your use-case, Redis or RabbitMQ alone could be a good fit. We\\u2019re going to use both for this scenario. The simplest way to provision Redis and RabbitMQ is via Docker. You can pull a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://hub.docker.com/_/redis/\"\n  }, \"Redis image\"), \" and a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://hub.docker.com/_/rabbitmq\"\n  }, \"RabbitMQ image\"), \" from Docker Hub and provision a docker container by running this single command in your terminal:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"docker run -d -p 5672:5672 rabbitmq \\ndocker run -d -p 6379:6379 redis\\n\")), mdx(\"p\", null, \"Now that we\\u2019ve created our celery.py file, it\\u2019s necessary to update our project\\u2019s \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"init\"), \" file (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"demo_project/__init__.py\"), \") so that our celery app is imported when Django starts up. For those seeking a deeper insight, this Celery/Django configuration is based off the Celery tutorial \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.celeryproject.org/en/stable/django/first-steps-with-django.html\"\n  }, \"First Steps With Django\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"from __future__ import absolute_import, unicode_literals\\n\\n# This will make sure the app is always imported when\\n# Django starts so that shared_task will use this app.\\nfrom .celery import app as celery_app\\n\\n__all__ = ('celery_app',)\\n\")), mdx(\"p\", null, \"The final piece of the Celery setup is to create the function for our logic. Let\\u2019s create a file called tasks.py inside our Django app (ie. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"celery_demo/demo_project/demo_app/tasks.py\"), \")\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"from celery import shared_task\\nfrom celery_progress.backend import ProgressRecorder\\nimport datetime\\nfrom nasapy import Nasa\\nimport random\\nimport time\\n\\nnasa = Nasa(key=\\\"Generate your API Key at https://api.nasa.gov/\\\")\\n\\n@shared_task(bind=True)\\ndef get_nasa_image(self, seconds):\\n    progress_recorder = ProgressRecorder(self)\\n    result = 0\\n    for i in range(seconds):\\n        time.sleep(4)\\n        result += i\\n\\n        start_date = datetime.datetime.strptime('06/16/1995', '%m/%d/%Y')\\n        end_date = datetime.datetime.now()\\n        time_between_dates = end_date - start_date\\n        days_between_dates = time_between_dates.days\\n        image_not_suitable = True\\n\\n        while image_not_suitable:\\n            random_number_of_days = random.randrange(days_between_dates)\\n            random_date = start_date + datetime.timedelta(days=random_number_of_days)\\n            nasa_image_result = nasa.picture_of_the_day(random_date)\\n\\n            if 'url' in nasa_image_result and nasa_image_result['url'].endswith(('.bmp', '.gif', '.heif', '.jpeg', '.jpg', '.png', '.svg', '.webp')):\\n                break\\n\\n        progress_recorder.set_progress(i + 1, seconds, description=nasa_image_result)\\n    return result\\n\")), mdx(\"p\", null, \"Our task could potentially have done any manner of work. It seemed more fun though to do something more interesting than, say, counting to 100. Our task will be retrieving random images from NASA\\u2019s \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Astronomy Picture of the Day API\"), \". See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://api.nasa.gov/\"\n  }, \"api.nasa.gov\"), \" for further info and to generate your own API key. As the API sometimes links to YouTube videos and interactive web pages, it makes sense from a visual perspective for us to only link image files. The task itself is relatively straightforward. Iterate through a numerical range and for each iteration do the following:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Generate a random date within a valid date range\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Retrieve an image for this date\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Check if the image is valid and repeat steps 3 + 4 if necessary, until a valid image file is retrieved\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Update Celery\\u2019s progress with an image URL and metadata\")), mdx(\"p\", null, \"One cool feature of note is that metadata is being passed back in JSON format. With Celery configured and our celery task written, we can now build out the Django frontend. The first step is integrating celery-progress; a Python package that manages the polling of celery\\u2019s results backend and visualizes it with progress bars. Celery polls Redis every 500 milliseconds, updating the progress bars on if necessary.\"), mdx(\"p\", null, \"First off, let\\u2019s update our projects urls file (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"demo_project/demo_project/urls.py\"), \") with the following:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"from django.contrib import admin\\nfrom django.urls import include, path, re_path\\n\\nurlpatterns = [\\n    re_path(r'^', include('demo_app.urls')),\\n    re_path(r'^celery-progress/', include('celery_progress.urls')),\\n]\\n\")), mdx(\"p\", null, \"In our project\\u2019s \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"settings\"), \" file (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"celery_demo/demo_project/demo_project/settings.py\"), \"), we need to add \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"demo\", \"_\", \"app\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"celery\"), \", and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"celery\", \"_\", \"progress\"), \" to the INSTALLED_APPS variable in our settings.py file\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"INSTALLED_APPS = [\\n    'django.contrib.admin',\\n    'django.contrib.auth',\\n    'django.contrib.contenttypes',\\n    'django.contrib.sessions',\\n    'django.contrib.messages',\\n    'django.contrib.staticfiles',\\n    'demo_app',\\n    'celery',\\n    'celery_progress',\\n]\\n\")), mdx(\"p\", null, \"We also need to update our project\\u2019s \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"views\"), \" file (ie. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"celery_demo/demo_project/demo_app/views.py\"), \")\"), mdx(\"p\", null, \"Here we are adding a new view which will call our Celery task eight times. Each individual Celery task will then poll NASA's API five times. In order for us to track the progress of each task on the frontend, it is necessary to return the id of each Celery tasks. I have chosen to go with a dictionary data structure as it allows us to iterate easily through multiple concurrent task ids. The logic iterates from 0 to 7, creating a dictionary which maps each number in the range to its corresponding Celery task.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"from django.contrib import admin\\nfrom django.urls import include, path, re_path\\n\\nurlpatterns = [\\n    re_path(r'^', include('demo_app.urls')),\\n    re_path(r'^celery-progress/', include('celery_progress.urls')),\\n]\\n\")), mdx(\"h3\", {\n    id: \"frontend-logic-and-templates\"\n  }, \"Frontend Logic and Templates\"), mdx(\"p\", null, \"Within our Django app, create a file named urls.py (ie. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"celery_demo/demo_project/demo_app/urls.py\"), \"). The purpose of this is to map a template file to the URL path. In our case it\\u2019s our webapp\\u2019s root directory (ie. What is displayed at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://127.0.0.1:8000/\"\n  }, \"http://127.0.0.1:8000/\"), \").\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"from django.contrib import admin\\nfrom django.urls import include, path, re_path\\n\\nurlpatterns = [\\n    re_path(r'^', include('demo_app.urls')),\\n    re_path(r'^celery-progress/', include('celery_progress.urls')),\\n]\\n\")), mdx(\"p\", null, \"The next logical step is to create our template file. Within the Django app\\u2019s \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"templates\"), \" folder, create another folder named \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"demo\", \"_\", \"app\"), \" and a file named \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"index.html\"), \" within it. (ie. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"celery_demo/demo_project/demo_app/templates/demo_app/index.html\"), \"). The level of nesting in this file path may seem excessive but the namespacing is an important discipline that would become apparent if this Django project had another app containing a template named index.html. From the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.djangoproject.com/en/3.0/intro/tutorial03/\"\n  }, \"Django documentation\"), \": \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\\"Django will choose the first template it finds whose name matches, and if you had a template with the same name in a different application, Django would be unable to distinguish between them.\\\"\")), mdx(\"p\", null, \"Our template will be somewhat involved, so now is a good time to check and ensure that everything is working as expected. Let\\u2019s write the text \\u2018Hello World\\u2019 to this template file and confirm that everything is working ok by checking our webapp in the browser. Run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"python3 manage.py runserver\"), \" in your terminal and you should see something like this in your browser at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://127.0.0.1:8000/\"\n  }, \"http://127.0.0.1:8000/\"), \".\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"62.5%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAbElEQVQoz+2LSQqAMAwA+/+XuC9d0qJ9g3jxDeLBq6B2kaqI4EHQa4eBhJBB/TBOs2raLgjzOMWEVQRqCpKCZNwJQgI/96xgJRGYVlGKk5yhdVmsNfYT6BhaG6X07oV+qG4P7oLsD3zs49d4A3mg+L8DyC/EAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Django Hello World\",\n    \"title\": \"Django Hello World\",\n    \"src\": \"/static/f7bb0d5a8d58e82ea36df9a5776ef361/7d769/django_hello_world.png\",\n    \"srcSet\": [\"/static/f7bb0d5a8d58e82ea36df9a5776ef361/5243c/django_hello_world.png 240w\", \"/static/f7bb0d5a8d58e82ea36df9a5776ef361/ab158/django_hello_world.png 480w\", \"/static/f7bb0d5a8d58e82ea36df9a5776ef361/7d769/django_hello_world.png 960w\", \"/static/f7bb0d5a8d58e82ea36df9a5776ef361/4af54/django_hello_world.png 1400w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"Now let\\u2019s fill out our index.html template properly.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-html\"\n  }, \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n    <head>\\n        <title>Celery-Progress Example</title>\\n        <meta charset=\\\"utf-8\\\">\\n        <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\">\\n        <link rel=\\\"stylesheet\\\" href=\\\"https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css\\\">\\n        <script src=\\\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\\\"></script>\\n        <script src=\\\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js\\\"></script>\\n        <script src=\\\"https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js\\\"></script>\\n        <style>\\n            .nasa-image {\\n                max-width: 100%;\\n                max-height: 230px;\\n                padding-bottom: 5px;\\n            }\\n        </style>\\n    </head>\\n    <body>\\n        {% load static %}\\n        <div class=\\\"bg-dark text-white text-center\\\">\\n            <h1>Celery-Progress Demo</h1>\\n            <p>Utilising NASA's <i>Astonomy Image of the Day</i> API</p> \\n        </div>\\n        \\n        <div class=\\\"container-fluid\\\">\\n            <div class=\\\"row align-items-end\\\">\\n                {% for key in celery_task_ids %}\\n                    <div class=\\\"col-sm-3\\\">\\n                        <div class=\\\"text-center\\\">\\n                            <img id=\\\"progress-bar{{ key }}-image\\\" src=\\\"\\\" class=\\\"nasa-image\\\">\\n                        </div>\\n                        <a id=\\\"progress-bar{{ key }}-image-link\\\" href=\\\"\\\"></a>\\n                        <div class='progress-wrapper'>\\n                            <div id=\\\"progress-bar{{ key }}\\\" class='progress-bar' style=\\\"background-color: #68a9ef; width: 0%;\\\">&nbsp;</div>\\n                        </div>\\n                        <div id=\\\"progress-bar{{ key }}-message\\\">Waiting for progress to start...</div>\\n                    </div>\\n                {% endfor %}\\n            </div>\\n        </div>\\n    </body>\\n</html>\\n<!-- celery logic -->\\n<script src=\\\"{% static 'celery_progress/celery_progress.js' %}\\\"></script>\\n<script>\\n    function customProgress(progressBarElement, progressBarMessageElement, progress) {\\n        barIdentifier = progressBarElement.id.substring(12)\\n        \\n        if(progress.current == 0 && progress.total == 100){\\n            progressMessage = \\\"\\\"\\n        } else {\\n            if(progress.description && progress.description.url){\\n                var nasaImageElement = document.getElementById(progressBarElement.id + \\\"-image\\\");\\n                nasaImageElement.src = progress.description.url\\n                var nasaImageLinkElement = document.getElementById(progressBarElement.id + \\\"-image-link\\\");\\n                nasaImageLinkElement.href = progress.description.url\\n                nasaImageLinkElement.innerHTML = progress.description.date + \\\" | \\\" + progress.description.title\\n            }\\n\\n            taskNumber = parseInt(progress.current)+1\\n            taskPercentage = taskNumber / progress.total * 100\\n\\n            progressBarElement.style.backgroundColor = \\\"#68a9ef\\\"\\n            progressBarElement.style.width = taskPercentage + \\\"%\\\"\\n            progressBarMessageElement.className = \\\"alert alert-info\\\"\\n            progressMessage = \\\"Currently fetching image \\\" + taskNumber + \\\" of \\\" + progress.total\\n        }\\n\\n        progressBarMessageElement.innerHTML = (\\n            progressMessage\\n        );\\n    }\\n</script>\\n\\n<script src=\\\"{% static 'celery_progress/celery_progress.js' %}\\\"></script>\\n\\n{% for key, value in celery_task_ids.items %}\\n    <script>\\n        document.addEventListener(\\\"DOMContentLoaded\\\", function () {\\n            var progressUrl = \\\"{% url 'celery_progress:task_status' value %}\\\";\\n            CeleryProgressBar.initProgressBar(progressUrl, {\\n                onProgress: customProgress,\\n                progressBarId: \\\"progress-bar{{ key }}\\\",\\n                progressBarMessageId: \\\"progress-bar{{ key }}-message\\\"\\n            });\\n        });\\n    </script>\\n{% endfor %}\\n\")), mdx(\"p\", null, \"There are a three main parts to this template: CSS for styling everything , Python logic written in Django\\u2019s \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.djangoproject.com/en/3.0/ref/templates/language/\"\n  }, \"template language\"), \", and JavaScript logic for integrating celery-progress and dynamically updating relevant HTML elements.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"In the head of the file the dependencies for the Bootstrap CSS framework are imported. A custom CSS class selector is necessary in addition to Bootstrap\\u2019s default stylesheets. The purpose of this class selector is to ensure that all eight images are uniform in height and width, regardless of the dimensions of the source images.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The code for generating the visual content that the user will see is all nested within one \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.w3schools.com/bootstrap4/bootstrap_containers.asp\"\n  }, \"Bootstrap container\"), \". Our view file has already passed a Python dictionary named \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"celery\", \"_\", \"task\", \"_\", \"ids\"), \" to this template. The code iterates through this dictionary and dynamically generates the raw HTML that displays the images.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Most of the JavaScript that the celery-progress package requires is already configured by default. We require two additions. The first is to add event listeners so that celery-progress begins polling Redis for task-state updates as soon as the DOM loads. It is also necessary to override the default onProgress function which celery-progress calls each time a task\\u2019s state updates. It is necessary to override this as the HTML used to display our images differs from the celery-progress default; we are updating each element with an image and each image\\u2019s metadata.\")), mdx(\"h3\", {\n    id: \"running-final-app\"\n  }, \"Running Final App\"), mdx(\"p\", null, \"With our template complete, we are now ready to view the finished product. First let\\u2019s start up Celery:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"python3 -m celery -A demo_project worker -l info --concurrency=8\\n\")), mdx(\"p\", null, \"Where this command is run from is important. It should be run from within this project root folder (ie. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"celery_demo/\"), \"). Note that a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"concurrency\"), \" flag is included and set to eight. Celery defaults this value to the host machine\\u2019s number of cores, so if I was to run this on a four-core machine without the concurrency flag set, it would only run four concurrent tasks at a time.\"), mdx(\"p\", null, \"Finally, if it isn\\u2019t already running, start the Django webserver:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"python3 manage.py runserver\\n\")), mdx(\"p\", null, \"Navigate to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://127.0.0.1:8000/\"\n  }, \"http://127.0.0.1:8000/\"), \" in your web browser and enjoy 40 unique images from Nasa\\u2019s Astronomy Picture of the Day. For reference, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.youtube.com/watch?v=dWAJru1xx34\"\n  }, \"here\\u2019s a screen-recording of the web app in action\"), \", and if your web app failed to work as expected, you can of course clone the original from \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/oisinBates/celery_progress_demo\"\n  }, \"GitHub\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"I recently encountered a use-case that required the management of multiple long-running backend tasks while also necessitating granular…","timeToRead":7,"banner":null}},"pageContext":{"slug":"/dynamic-filtering-with-vuejs-and-rmarkdown","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["2744905544","3090400250","318001574"]}