{
    "componentChunkName": "component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx",
    "path": "/dynamic-filtering-with-vue-js-and-r-markdown",
    "result": {"data":{"post":{"slug":"/dynamic-filtering-with-vue-js-and-r-markdown","title":"Dynamic filtering with Vue.js and R Markdown","date":"14.02.2020","tags":null,"description":null,"canonicalUrl":"https://oisinbates.com","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Dynamic filtering with Vue.js and R Markdown\",\n  \"date\": \"2020-02-14T00:00:00.000Z\",\n  \"slug\": \"/dynamic-filtering-with-vue-js-and-r-markdown\",\n  \"canonicalUrl\": \"https://oisinbates.com\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"R Markdown is a fantastic resource for creating static documents for users to consume your data. However, while R Markdown is extremely capable for standard use cases, it can prove limiting when your requirements are less straightforward. Vue.js is a modern JavaScript framework which can be harnessed to build feature-rich user interfaces. In this blog I\\u2019m going to walk you through my experience integrating Vue with R Markdown, and in doing so, we\\u2019ll generate a dynamic table of data controlled by user inputs that are powered by Vue.\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://repl.it/@oisinprocogia/Dynamic-filtering-with-Vuejs-and-R-Markdown\"\n  }, \"Here\\u2019s a usable example of the rendered HTML output from the R Markdown file that we\\u2019ll be creating\"), \". As it\\u2019s a static file, its data is not live and represents the NBA stats at the time of publication, 14 February 2020. All of the source code referenced in this blog post is \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/oisinBates/vue-r-markdown-demo/blob/main/vue_demo.Rmd\"\n  }, \"viewable in a corresponding GitHub repo\"), \".\"), mdx(\"h3\", null, \"Accessing Data\"), mdx(\"p\", null, \"Firstly, we\\u2019ll need to get some data. I\\u2019ve thoroughly enjoyed watching Luka Don\\u010Di\\u0107\\u2019s rise in the NBA this season, and given his prolific scoring, I figured it\\u2019d be fun to compare him amongst the top ten scorers in the 2019\\u201320 NBA season. I\\u2019m going to use the R package \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://cran.r-project.org/web/packages/ballr/ballr.pdf\"\n  }, \"ballr\"), \" which provides an R interface for \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.basketball-reference.com/\"\n  }, \"basketball-reference.com\"), \". From there we can convert our data to JSON format and echo it as a global JavaScript variable.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"players <- NBAPerGameStatistics(season = 2020)\\ntop_ten_players <- players %>%\\n  top_n(10, pts) %>% \\n  arrange(desc(pts))\\njson_players <- toJSON(top_ten_players, pretty=TRUE)\\ncat(\\\"<script> var topTen=\\\", json_players, \\\"</script>\\\")\\n\")), mdx(\"h3\", null, \"Integrating Vue with R markdown\"), mdx(\"p\", null, \"For convenience, I\\u2019m going to source Vue.js from a Content Delivery Network (CDN) link. We can \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://vuejs.org/v2/guide/installation.html\"\n  }, \"source a link for the latest Vue build via vuejs.org\"), \". Vue maintains an excellent devtools extension for Chrome and Firefox browsers, though it\\u2019s worth warning that these devtools won\\u2019t work on pages using the minified production builds of Vue. In this case, use the alternative development build \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://vuejs.org/v2/guide/installation.html\"\n  }, \"from the same resource section on vuejs.org\"), \".\"), mdx(\"p\", null, \"While R Markdown includes a markdown option for importing CSS and JavaScript files, these do not currently support external urls and only work with local filepaths. Since we\\u2019ve opted for CDN links, we\\u2019ll have to print the HTML markup explicitly. I\\u2019ve also opted to import \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://refreshless.com/nouislider/\"\n  }, \"noUiSlider\"), \" as a convenient solution for the logic that\\u2019s necessary to manage a double range slider.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"cat(\\n  \\\"<script src='https://cdn.jsdelivr.net/npm/vue@2.6.11'></script>\\\",\\n  \\\"<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/11.0.3/nouislider.min.css'>\\\",\\n  \\\"<script src='https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/11.0.3/nouislider.min.js'></script>\\\"\\n)\\n\")), mdx(\"p\", null, \"We\\u2019ll be using Vue to manage four HTML elements: a table, two \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<select>\"), \" elements, and a range slider. Given the interlinked nature of the Vue logic, it makes more sense to include this code in its entirety at this stage. From here we can discuss the individual elements in reference to this block, rather than cherry-picking individual lines of code later and adding an unnecessary layer of complexity.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"var vue = new Vue({\\n    el: '#app',\\n    data: {\\n      players: topTen,\\n      minAgeRange: null,\\n      maxAgeRange: null,\\n      selectedDivision: '',\\n      selectedConference: '',\\n      nbaDivisions: {\\n        atlantic: ['BOS', 'BRK','NYK', 'PHI', 'TOR'],\\n        central: ['CHI', 'CLE', 'DET', 'IND', 'MIL'],\\n        northWest: ['DEN', 'MIN', 'OKC', 'POR', 'UTA'],\\n        pacific: ['GSW', 'LAC', 'LAL', 'PHO', 'SAC'],\\n        southEast: ['ATL', 'CHO', 'MIA', 'ORL', 'WAS'],\\n        southWest: ['DAL', 'HOU', 'MEM', 'NOP', 'SAS']\\n      },\\n      slider: {\\n        min: topTen.reduce((prev, curr) => prev.age < curr.age ? prev : curr).age,\\n        max: topTen.reduce((prev, curr) => prev.age > curr.age ? prev : curr).age\\n      } \\n    },\\n  methods: {\\n    filterByAge: (minAge, maxAge, selectedDivision, selectedConference, nbaDivisions, nbaConferences) => {\\n      return (element) => { \\n        return ( \\n          element.age >= minAge && \\n          element.age <= maxAge &&\\n          ( selectedDivision === '' || nbaDivisions[selectedDivision].includes(element.tm) ) &&\\n          ( selectedConference === '' || nbaConferences[selectedConference].includes(element.tm) ) \\n        ); \\n      } \\n    },\\n    inputHandler(event) {\\n      if(event.srcElement.id === 'conference-selector') {\\n        this.selectedDivision = ''\\n      } else {\\n        this.selectedConference = ''\\n      }\\n    }\\n  },\\n  mounted() {\\n    noUiSlider.create(this.$refs.slider, {\\n      start: [this.slider.min, this.slider.max],\\n      step: 1,\\n      range: {\\n        'min': this.slider.min,\\n        'max': this.slider.max\\n      },\\n      pips: {\\n          mode: 'steps',\\n          density: 100 / (this.slider.max - this.slider.min + 1)\\n      }\\n    });\\n    this.$refs.slider.noUiSlider.on('update',(values, handle) => {\\n      this[handle ? 'maxAgeRange' : 'minAgeRange'] = parseInt(values[handle]);\\n    }); \\n  },\\n  computed: { \\n    filteredPlayers() { \\n      return this.players.filter(this.filterByAge(this.minAgeRange, this.maxAgeRange, this.selectedDivision,\\n      this.selectedConference, this.nbaDivisions, this.nbaConferences));\\n    },\\n    nbaConferences() {\\n      return {\\n        eastern: [...this.nbaDivisions.atlantic, ...this.nbaDivisions.central, ...this.nbaDivisions.southEast],\\n        western: [...this.nbaDivisions.pacific, ...this.nbaDivisions.northWest, ...this.nbaDivisions.southWest]\\n      }\\n    }\\n  } \\n})\\n\")), mdx(\"h3\", null, \"Filtering Players based on input values\"), mdx(\"p\", null, \"In our HTML code, we\\u2019ll be accessing Vue data from two places: the instance\\u2019s data object and via computed properties which dynamically change to reflect any related changes in the data object. In our case, we have a computed property called filteredPlayers. This array of players will change to reflect any changes made by the user via the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<select>\"), \" elements or range slider, filtering the players accordingly. All we need to know at a high level is that Vue is reactive and our visualized data will respond in real time to user input. If you plan to work in-depth with Vue in future though, it\\u2019s well worth reading and understanding its \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://vuejs.org/v2/guide/reactivity.html\"\n  }, \"reactivity system\"), \". This is valuable not just in understanding the secrets behind Vue\\u2019s magic, but also in avoiding common \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://en.wikipedia.org/wiki/Gotcha_(programming)\"\n  }, \"gotchas\"), \".\"), mdx(\"p\", null, \"In our HTML markup we can populate a table by looping through our filteredPlayers array. It\\u2019s possible to include raw HTML markup in R Markdown files, but we must \\u2018cat\\u2019 any HTML elements utilizing Vue\\u2019s syntactic sugar, as R will print it as a block of raw code rather than actual HTML markup if we don\\u2019t. A \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.basketball-reference.com/about/glossary.html\"\n  }, \"glossary for this table\\u2019s column variables can be referenced via basketball-reference.com\"), \".\"), mdx(\"h3\", null), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-rmd\"\n  }, \"<div class='row'>\\n  <table class=\\\"table\\\">\\n    <thead>\\n      <tr>\\n        <th>Name</th>\\n        <th>Pos</th>\\n        <th>Age</th>\\n        <th>Tm</th>\\n        <th>G</th>\\n        <th>GS</th>\\n        <th>MP</th>\\n        <th>FG</th>\\n        <th>FGA%</th>\\n        <th>FG%</th>\\n        <th>PTS</th>\\n      </tr>\\n    <thead>\\n    <tbody>\\n    ```{r, results='asis', echo=FALSE, message=FALSE}\\n      cat(\\n        \\\"<tr v-for='player in filteredPlayers'>\\\", \\n          \\\"<td>{{ player.player }}</td>\\\",\\n          \\\"<td>{{ player.pos }}</td>\\\",\\n          \\\"<td>{{ player.age }}</td>\\\",\\n          \\\"<td>{{ player.tm }}</td>\\\",\\n          \\\"<td>{{ player.g }}</td>\\\",\\n          \\\"<td>{{ player.gs }}</td>\\\",\\n          \\\"<td>{{ player.mp }}</td>\\\",\\n          \\\"<td>{{ player.fg }}</td>\\\",\\n          \\\"<td>{{ player.fga }}</td>\\\",\\n          \\\"<td>{{ player.fgpercent }}</td>\\\",\\n          \\\"<td>{{ player.pts }}</td>\\\",\\n        \\\"</tr>\\\"\\n      )\\n    ```\\n    </tbody>\\n  </table>\\n</div>\\n\")), mdx(\"h3\", null, \"Configuring the range slider\"), mdx(\"p\", null, \"One popular option for generating data tables in R Markdown is the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://rstudio.github.io/DT/\"\n  }, \"DT package\"), \", which provides an R interface to a JavaScript library named DataTables. This package offers good solutions to many normal use cases, and even includes a range slider option for numeric, date, and time data. Despite this I feel that it\\u2019s a useful learning opportunity to include a custom slider, not just for scenarios where non-standard range filtering is required, but also for contexts where custom UI requirements necessitate a non-standard frontend.\"), mdx(\"p\", null, \"The first thing that you may notice is that the slider is created within our Vue instance\\u2019s mounted() function. This function is known as a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://vuejs.org/v2/guide/instance.html#Instance-Lifecycle-Hooks\"\n  }, \"Lifecycle Hook\"), \" and allows us to dictate that the code within the function will only be executed once the Vue instance has been created and mounted to our web page\\u2019s \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model\"\n  }, \"Document Object Model (DOM)\"), \". Since this slider is separate from our Vue instance but relies upon it in order to work, it is important that the slider is created at this point and not earlier. Lower-level discussion of Vue.js is beyond the scope of this blog post, but it\\u2019s certainly worth understanding the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://vuejs.org/v2/guide/instance.html#Lifecycle-Diagram\"\n  }, \"Vue lifecycle\"), \" if you do plan to use Vue in a project of your own.\"), mdx(\"p\", null, \"There are a few final considerations for our range slider. In order to dynamically set the slider\\u2019s limits each time our markdown file is rendered, we can use JavaScript\\u2019s reduce() function to find the highest and lowest player ages. Finally, we can set a listener for the slider\\u2019s update events in order to update Vue\\u2019s data each time the slider\\u2019s ranges change.\"), mdx(\"h3\", null, \"Configuring the \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"<select>\"), \" inputs\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-rmd\"\n  }, \"<div class='row'>\\n  <div class='col-md-6'>\\n    ```{r, results='asis', echo=FALSE, message=FALSE}\\n      cat(\\n        \\\"<select v-model='selectedConference' v-on:change='inputHandler($event)' id='conference-selector' class='form-control form-control-lg'>\\\",\\n        \\\"<option value=''>Filter by Conference</option>\\\",\\n        \\\"<option value='eastern'>Eastern</option>\\\",\\n        \\\"<option value='western'>Western</option>\\\",\\n        \\\"</select>\\\"\\n      )\\n    ```\\n  </div>\\n  <div class='col-md-6'>\\n    ```{r, results='asis', echo=FALSE, message=FALSE}\\n      cat(\\n        \\\"<select v-model='selectedDivision' v-on:change='inputHandler($event)' class='form-control form-control-lg'>\\\",\\n        \\\"<option value=''>Filter by Division</option>\\\",\\n        \\\"<option value='atlantic'>Atlantic</option>\\\",\\n        \\\"<option value='central'>Central</option>\\\",\\n        \\\"<option value='northWest'>North West</option>\\\",\\n        \\\"<option value='pacific'>Pacific</option>\\\",\\n        \\\"<option value='southEast'>South East</option>\\\",\\n        \\\"<option value='southWest'>South West</option>\\\",\\n        \\\"</select>\\\"\\n      )\\n    ```\\n  </div>\\n</div>\\n\")), mdx(\"p\", null, \"These inputs allow the user to filter the players by their respective divisions and conferences. I\\u2019ve added a function named inputHandler to each input. This function will be called each time a HTML element\\u2019s value changes, in order to reset a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<select>\"), \" element\\u2019s related Vue data if the user selects a value from its counterpart \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<select>\"), \" element. For example, we don\\u2019t want to be concurrently filtering for players in both the Atlantic Division and the Western Conference as that will return zero players.\"), mdx(\"h3\", null, \"Applying custom Styling\"), mdx(\"p\", null, \"One notable benefit of R Markdown is that it utilizes the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://getbootstrap.com/docs/3.3/\"\n  }, \"Bootstrap framework\"), \". When searching for solutions, it\\u2019s worth bearing in mind that R Markdown still uses Bootstrap 3.3 while Bootstrap itself is now on version 4.0. This is relevant to the styling we need for our template as we\\u2019ll need to put some padding under the div that houses our range slider. If we were googling for Bootstrap solutions, we\\u2019d likely come across Bootstrap 4\\u2019s native padding classes, but as these don\\u2019t exists in Bootstrap 3 we\\u2019ll have to create our own class.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-css\"\n  }, \".pb-15 {\\n  padding-bottom: 9rem;\\n}\\n\")), mdx(\"h3\", null, \"Working with the Quirks of R Markdown\"), mdx(\"p\", null, \"Undoubtedly, R Markdown has some quirks. If you don\\u2019t run into anything while composing straightforward markdown templates, it\\u2019s likely you will while attempting to integrate external libraries into your template. I\\u2019ve already mentioned the issues with importing files from CDN links. Another to add to that list is indentation. My preference (for readability and ease of editing) was to use HTML markup for the necessary bootstrap divs and to nest these divs as I would in a normal HTML file. In my case I found it necessary to compromise on indentation as there existed cases where the indentation either resulted in divs being rendered as code, or even being omitted from the rendered HTML file altogether. A coworker of mine often jokes that programming in R can be both an art and a science. This certainly does seem the case at times when tweaking complex R Markdown files to ensure they knit as expected.\"), mdx(\"h3\", null, \"Conclusion\"), mdx(\"p\", null, \"I\\u2019m a big believer in using the right tool for the right job. There are times to use and not to use R Markdown. If you find yourself requiring extensive front-end logic to create your desired user-interfaces, you may want to consider an alternative reporting solution to R Markdown. If you do find yourself leveraging R Markdown for a project though, I hope that this blog has helped spark some new ideas for achieving your desired results.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"R Markdown is a fantastic resource for creating static documents for users to consume your data. However, while R Markdown is extremely…","timeToRead":5,"banner":null}},"pageContext":{"slug":"/dynamic-filtering-with-vue-js-and-r-markdown","formatString":"DD.MM.YYYY"}},
    "staticQueryHashes": ["2744905544","3090400250","318001574"]}