{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/hue-active-directory-saml-auth","result":{"data":{"post":{"slug":"/hue-active-directory-saml-auth","title":"Configuring SAML authentication for Azure Active Directory on Hue","date":"30.04.2022","tags":[{"name":"SAML","slug":"saml"},{"name":"Active Directory","slug":"active-directory"},{"name":"Hue","slug":"hue"},{"name":"Hadoop","slug":"hadoop"}],"description":null,"canonicalUrl":"https://oisinbates.com","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Configuring SAML authentication for Azure Active Directory on Hue\",\n  \"date\": \"2022-04-30T00:00:00.000Z\",\n  \"tags\": [\"SAML\", \"Active Directory\", \"Hue\", \"Hadoop\"],\n  \"slug\": \"/hue-active-directory-saml-auth\",\n  \"canonicalUrl\": \"https://oisinbates.com\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"Introduction\"), mdx(\"p\", null, \"I recently had to undertake the task of deploying a new \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/cloudera/hue\"\n  }, \"Hue\"), \" container with \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.gethue.com/administrator/configuration/server/#saml\"\n  }, \"SAML authentication\"), \".\\nIn reaching a working solution I found myself troubleshooting more than initially anticipated, in part due to gaps in Hue's documentation and an apparent bug in one of its underlying dependency packages.\"), mdx(\"p\", null, \"My goal in publishing this article is to provide a concise resource for others who are also integrating Hue with Azure Active Directory (AD).\\nIn writing this I'm making the presumption that the majority of readers will have searched the internet for this specific topic and already have a baseline understanding of Hue and AD.\\nAccordingly, in the interest of brevity, some foundational topics aren't discussed in detail but rather referenced through the inclusion of hyperlinks to external resources.\"), mdx(\"p\", null, \"One final disclaimer is that the solution discussed here is based upon my experience of the latest open-source release, Hue version \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"4.10.0\"), \". If you are using a future release and/or Cloudera's enterprise version, some syntax/features may differ.\"), mdx(\"h2\", null, \"Choosing a SAML claim\"), mdx(\"p\", null, \"The following diagram \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/auth-saml\"\n  }, \"sourced from Azure AD's documentation\"), \" outlines the flow through which users of your web app are authenticated against your Active Directory and SAML tokens are returned.\\n\", mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"55.41666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB00lEQVQoz32SSW/UQBCF/f9/BHBCcODEFYGUAwciRBa2ZIg1zow9XqfbHq+9fVE3ASYSSUkld5efXr9XVdGsDFU3o7TBGEMiZl6c/CRLUwxgrcFaiw/nXMD4+3H6mg8hBFEiFp6/+8IydKG43VXs8oZ639HOGuNcqM/zhNaKp6JtW6IkrVinFcM4YYxGKRVyniY+xA2p6L02Lr9+53p1Qz9M7EWLkB3toScvStI0DYRSSiLjJTs4OztHtl2w7q0Ni2FVjeTdgnWOvBL4xzdZRVY0dP3IOC3IqmS1uqHtJ263GZE2hsVYrn4lVI0MoD8924+GSeknbb6vDbvhd1uEV6iNZV4UGIWnMdaFB3y8uSx5e/L5AYFX7xPnGLXlZdzzrRjvLbdE/vBpI3h2GtMvllFZBv/VDtnPJFnNoByvz3Muf1yF9szashhH3StyOdNNOuDDUHzD12Li461EG/dfW171aicpavFA6ZHuf1PW9zt0fXFGUTXIbmAvD2E4Huj3NC46ts1A2gzh/7zoQHi8i3+n7A+lhpPy8GjjJ2VYlKEWh0CmHnHS9z3Rviw4jbe8uogRdUVRlpRHmecF601GcpuyTrak2Y4syx9giqKgrmviOOYOxO1OVS1qUr0AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"SAML Authentication Diagram\",\n    \"title\": \"SAML Authentication Diagram\",\n    \"src\": \"/static/643c04e2d9e62bb8a6f70d6aa20f17c3/7d769/auth_saml.png\",\n    \"srcSet\": [\"/static/643c04e2d9e62bb8a6f70d6aa20f17c3/5243c/auth_saml.png 240w\", \"/static/643c04e2d9e62bb8a6f70d6aa20f17c3/ab158/auth_saml.png 480w\", \"/static/643c04e2d9e62bb8a6f70d6aa20f17c3/7d769/auth_saml.png 960w\", \"/static/643c04e2d9e62bb8a6f70d6aa20f17c3/59b0c/auth_saml.png 1305w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"These SAML tokens contain \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"claims\"), \" (ie. user name, email address etc.) that are used by Hue when each new user logs in for the first time.\\nWithin your Azure AD console, you will see these claims listed for your current app (if you have not already created a new application in Azure AD, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.microsoft.com/en-us/azure/active-directory/manage-apps/add-application-portal-setup-sso\"\n  }, \"here's a good tutorial from Microsoft's documentation\"), \").\\n\", mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"64.58333333333334%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABtklEQVQ4y51RS3LTQBTUFVjCBSgOxSUCVBYpL1iQFdyDLYRFKgcJcQIxWFgfW7+RZGk0M1JT/WKpzMcJxVR1vZHmTb/uHu/R6894/GaOp29v8OzdDZ6czvH8vY/jTz6OPvh48dHHyzPWJV6d+Tg5DzG7iDG7iP4K73bTYB4oXEcVrsIal6sSi3WFRapxm2h8zzTyrYFqHVRrUbYOpT4MT+UZFl+/IFj9QBQGWH5bII5C/O/y3AA0bYuyLNEZg0Z3qKpKvpvOoqxqtG2LxvTIiwJFUcA5h2EY0A+D1H141jporeWSsVbQdRpd18E6B2MMrLWwrpc9//d9f0fY99N+IqzrCnEcI89zOTy8hgfOd5Y5cb1ei00qoVrWaepOAW2maSoKDbFTyzr2cqBHgizLBLxApU3T/GKJIOF2u4VSBZRSAvaWSk09FOLVdS0KeUjy+9Y/WSYJM+Srjpb5QIQmtBbQXpIkcM7+oX60TBceL1EhSaMoFARBgDC8q3EUSWUcBKMZM94nJZinKOTksZl1s9lMSNNE4mBznmVTL+/9TjoR7hMQVDuqFtIkkYcaBzIOqqTFfTCWnwYG343Ck9hBAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Azure AD Claims\",\n    \"title\": \"Azure AD Claims\",\n    \"src\": \"/static/cb134ebf4b5c1ea0533a6387f22f163a/7d769/azure_ad_claims.png\",\n    \"srcSet\": [\"/static/cb134ebf4b5c1ea0533a6387f22f163a/5243c/azure_ad_claims.png 240w\", \"/static/cb134ebf4b5c1ea0533a6387f22f163a/ab158/azure_ad_claims.png 480w\", \"/static/cb134ebf4b5c1ea0533a6387f22f163a/7d769/azure_ad_claims.png 960w\", \"/static/cb134ebf4b5c1ea0533a6387f22f163a/87339/azure_ad_claims.png 1440w\", \"/static/cb134ebf4b5c1ea0533a6387f22f163a/a381e/azure_ad_claims.png 1574w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"When searching Google for guidance on SAML configuration in Hue, two of the most prominent and relevant resources are \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.davehill.ie/code/hue-saml-azure-part-1/\"\n  }, \"this blog post\"), \" and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://community.cloudera.com/t5/Support-Questions/HUE-fails-with-saml/td-p/82559\"\n  }, \"this discussion on the Cloudera forum\"), \", both of which direct the user towards an 'attribute mapping' approach.\\nThis approach involves creating a configuration file that enables Hue to map our SAML claims to internal variables that it then uses to populate its database. Unfortunately, there appears to be a bug in the current open-source release of Hue(v4.10.0) which results in this mapping approach failing.\"), mdx(\"p\", null, \"With this context in mind, I found the simplest option to be an alternative solution which is briefly referenced in the previously-linked Cloudera forum discussion.\\nAs opposed to the other AD claims, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Unique User Identifier (Name ID)\"), \" is ingested by Hue without the need for any custom mapping. This results in the following \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"hue.ini\"), \" configuration:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"username_source=nameid\\nname_id_format=\\\"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress\\\"\\n\")), mdx(\"p\", null, \"We will return to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"hue.ini\"), \" configuration in more detail later, but for now let's focus on the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"name_id_format\"), \" value.\\nDeeper context and specific formatting references can be found \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.microsoft.com/en-us/azure/active-directory/develop/single-sign-on-saml-protocol#nameidpolicy\"\n  }, \"in the Azure AD documentation\"), \", but at a high level, there are four possible formats that we can choose to configure:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"emailAddress\"), \" returns the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"NameID\"), \" claim in e-mail address format\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"persistent\"), \" returns the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"NameID\"), \" claim as a pairwise identifier, a randomly-generated value. This is created once and the same value is returned every subsequent time.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"transient\"), \" returns the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"NameID\"), \" claim as a randomly generated value. A new value is generated each time a user logs in.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"unspecified\"), \" dictates that your identity provider will determine the claim format that is returned. In Azure AD's case this means that a pairwise identifier is returned.\")), mdx(\"p\", null, \"As the other formatting options return randomly-generated values, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"emailAddress\"), \" is the obvious choice if we want the ability to easily identify users in the Hue admin console.\"), mdx(\"h2\", null, \"Generating SSL keys\"), mdx(\"p\", null, \"In order for our Service Provider (Hue) and Identity Provider (Azure AD) to communicate securely, we must configure an SSL certificate and private key.\\nAzure AD automatically creates a certificate for new apps, but as the corresponding private key is not made available to us and Hue requires this, we will need to create a new key/cert and upload to Azure AD.\\nSpecifically, Azure AD requires a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pfx\"), \" filetype and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rsa\"), \" encryption while Hue requires \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".PEM\"), \" files with a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X.509\"), \" certificate. \"), mdx(\"p\", null, \"With these requirements in mind, we can create the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pem\"), \" key and cert files before converting to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pfx\"), \" and uploading to Azure AD.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"openssl req -x509 -newkey rsa:4096 -nodes -keyout hue_key.pem -out hue_crt.pem -days 365\\nopenssl pkcs12 -inkey hue_key.pem -in hue_crt.pem -export -out hue.pfx\\n\")), mdx(\"p\", null, \"The second of these commands will prompt you for a password. Make note of your chosen password as you will need it when uploading the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pfx\"), \" file to Azure AD.\\nFor a granular reference on \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"openssl\"), \", see the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.openssl.org/docs/manmaster/man1/openssl.html\"\n  }, \"openssl documentation\"), \" or pass the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--help\"), \" option in your command line (eg \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"openssl req --help\"), \").\\nWith our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"hue.pfx\"), \" file created we can now upload it to Azure AD and download the Identity Provider metadata file that Azure will auto-generate.\"), mdx(\"p\", null, \"Within the Azure AD console, you should see a similar layout to this:\\n\", mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"77.08333333333333%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB/ElEQVQoz31SSW4UMRStw7JhA5tcCSIhhASCK5AdEWsi0elUdXXHdnn4nr5HsJ10egNPLsmWhzfUm159XN5+Wd98Plx9W69vt3c/tvd9XN9uH36Kf42rr+vrT/MkGXnY3//e3a/LLDbKKZEb44wYkKWU+l9MYJ1SKoaQc04p+RABQCnlMBhrbfuc8cHoNgspK9De+1prLmWSoIUQIYTxGADQDs45pVQKgYj+BeidR8QQQill2rgAgFJKzrnWKqWklDBGKSXbtlFKtwZGCGGMtRljvMNinLixSqla6zB44gAWAbPFZIzRWpuO8fQlGrO0WnDBOQ/YlB8lSqU6CUfEWmuMERFjTOUZuRTrfEpp2q+nu7tflDwaDcboWitjbJ5nwXnLylkhxG63I4RYay/zzzlPGNAYk1IaSmqtnIvDYRVCjEMKYL9/IIRobXI+05eU8mTRt0g9pu5qEd55b4xxTVhOKedcOk8Zy5RSjMl5bLK1MbYzj0gwla1luZXylJD3njF2Ka2UEmJszM5Z75v7IaZ5pow8khjjuCylXJbFOTd2l2UZW82zsoYS4pwbR4UNzqPtiKkBQ3DO++fAhZDfb25A69YwBeCcyz2KWiuBIFWrpwY9ahdjHI7ORToeT1y05k9caUII9ro+ye5NOi+VUvM8n06noe78t/7K/gONf1gMqHsvewAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Azure AD SAML Sign-On View\",\n    \"title\": \"Azure AD SAML Sign-On View\",\n    \"src\": \"/static/0e8981d82437e618f1a6fa581c1d50b0/7d769/azure_ad_saml_sign_on.png\",\n    \"srcSet\": [\"/static/0e8981d82437e618f1a6fa581c1d50b0/5243c/azure_ad_saml_sign_on.png 240w\", \"/static/0e8981d82437e618f1a6fa581c1d50b0/ab158/azure_ad_saml_sign_on.png 480w\", \"/static/0e8981d82437e618f1a6fa581c1d50b0/7d769/azure_ad_saml_sign_on.png 960w\", \"/static/0e8981d82437e618f1a6fa581c1d50b0/87339/azure_ad_saml_sign_on.png 1440w\", \"/static/0e8981d82437e618f1a6fa581c1d50b0/88b03/azure_ad_saml_sign_on.png 1920w\", \"/static/0e8981d82437e618f1a6fa581c1d50b0/fe534/azure_ad_saml_sign_on.png 2116w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"If you edit the  \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SAML Signing Certificate\"), \" section, you will see options to import a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pfx\"), \" certificate and download a 'federated' XML file for the certificate that you have just uploaded.\\n\", mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"47.91666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABYlAAAWJQFJUiTwAAABV0lEQVQoz3WR6a7TQAyF8/7vh6hEadpRmLWZ1RPPnksShEBwPx35hyXLxz7T7XYj5LUsCyFknmdCSM553/fR+xhj/4R+MkkppFKUUqWUkIpzrrWOMboAIYTW2n+Hx8lUa+1j5Fzu3+6UsVIKAJRScu3OWu/9/jmTEHyLQF7P7/f7c35wxmKElLDkzBkjr5cx2geHuCXElC4dtFYnJUXwLngHwWu9KiU5o84a76xSUnDG6A8pePDWBwgQIYRf1lKajDGIeB2y73tOaX0rrVfrbIwQI2ynIPgNkXEuuMg5jzGO4XVdjTEppePJZ8tZu20RcbvqZTXntKVsjNVae+edc6WUSSmltbbGOOf+zab3jog55wjgPbzfqxSCMWaMbq1NVuvgfWutt1ZL+VOtVgCglEop58dDCPF8Pm5fvywLAfDH5ivuetJqbX/Te//tAhGDP0DEUsrPzR8bxz1PtlUlywAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Azure AD SAML Signing Certificate\",\n    \"title\": \"Azure AD SAML Signing Certificate\",\n    \"src\": \"/static/846a2a7729d49f6360d1ce9489d349ac/7d769/azure_ad_saml_signing_certificate.png\",\n    \"srcSet\": [\"/static/846a2a7729d49f6360d1ce9489d349ac/5243c/azure_ad_saml_signing_certificate.png 240w\", \"/static/846a2a7729d49f6360d1ce9489d349ac/ab158/azure_ad_saml_signing_certificate.png 480w\", \"/static/846a2a7729d49f6360d1ce9489d349ac/7d769/azure_ad_saml_signing_certificate.png 960w\", \"/static/846a2a7729d49f6360d1ce9489d349ac/87339/azure_ad_saml_signing_certificate.png 1440w\", \"/static/846a2a7729d49f6360d1ce9489d349ac/6a961/azure_ad_saml_signing_certificate.png 1706w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"h2\", null, \"Configuring Hue\"), mdx(\"p\", null, \"For setting the configuration, your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"hue.ini\"), \" file should contain the following keys:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"[desktop]\\n  redirect_whitelist=^\\\\/.$,https:\\\\/\\\\/login.microsoftonline.com\\\\/YOUR-UNIQUE-URL-SLUG\\\\/.*$\\n\\n  [[auth]]\\n    backend=libsaml.backend.SAML2Backend\\n\\n[libsaml]\\n  xmlsec_binary=/usr/bin/xmlsec1\\n  metadata_file=/opt/cloudera/security/saml/azure-ad-metadata.xml\\n  key_file=/opt/cloudera/security/saml/my_key.pem\\n  cert_file=/opt/cloudera/security/saml/my_cert.pem\\n  entity_id=https://MY-URL.com\\n  username_source=nameid\\n  name_id_format=\\\"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress\\\"\\n\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.gethue.com/administrator/configuration/server/#saml\"\n  }, \"Hue's documentation\"), \" is a useful reference for most configuration settings.\\nAs this documentation is not entirely thorough, referencing \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/cloudera/hue/blob/master/desktop/conf.dist/hue.ini\"\n  }, \"hue.ini in Hue's source code\"), \" will give deeper insights with additional comments that are not reflected in the documentation.\"), mdx(\"h2\", null, \"Uploading Hue metadata to Azure AD\"), mdx(\"p\", null, \"Our final step is to upload Hue's metadata \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".xml\"), \" file to Azure AD.\\nUpon starting Hue, a metadata file will be viewable at \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://MY-URL.com/saml2/metadata/\"), \".\\nAfter downloading a copy of this file, you can upload to Azure AD via its \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Upload metadata file\"), \" button.\\n\", mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"17.083333333333332%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAiklEQVQI133ESwrCMBRA0ezbieLAgbvRQvEDXYQBR1pRksa0SZr3XvqxNRUXoJfDZbNULg/FfCdWR5Vwt+Vuc/o+4S49wy/rTC/2iqHT8p6Lx61SAmsDtqTaeFt25KcYp78xavvKWCGLpy4v1xxDA0S1h9D2iASIFAI2LSAiUfcanIcQmvE9DWP8AITyokQPvn8lAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Azure AD Upload Metadata File\",\n    \"title\": \"Azure AD Upload Metadata File\",\n    \"src\": \"/static/ed0b5c6a4ba9a501170f65f79f61d0f4/7d769/azure_ad_upload_metadata_file.png\",\n    \"srcSet\": [\"/static/ed0b5c6a4ba9a501170f65f79f61d0f4/5243c/azure_ad_upload_metadata_file.png 240w\", \"/static/ed0b5c6a4ba9a501170f65f79f61d0f4/ab158/azure_ad_upload_metadata_file.png 480w\", \"/static/ed0b5c6a4ba9a501170f65f79f61d0f4/7d769/azure_ad_upload_metadata_file.png 960w\", \"/static/ed0b5c6a4ba9a501170f65f79f61d0f4/87339/azure_ad_upload_metadata_file.png 1440w\", \"/static/ed0b5c6a4ba9a501170f65f79f61d0f4/88b03/azure_ad_upload_metadata_file.png 1920w\", \"/static/ed0b5c6a4ba9a501170f65f79f61d0f4/fe534/azure_ad_upload_metadata_file.png 2116w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"Once this metadata file is uploaded, you will now be set to authenticate Active Directory users on Hue via Single Sign On. \"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Introduction I recently had to undertake the task of deploying a new  Hue  container with  SAML authentication .\nIn reaching a working…","timeToRead":3,"banner":null}},"pageContext":{"slug":"/hue-active-directory-saml-auth","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["2744905544","3090400250","318001574"]}