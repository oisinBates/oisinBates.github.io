{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/happy-hour-system-design-analogies","result":{"data":{"post":{"slug":"/happy-hour-system-design-analogies","title":"System Design analogies for a happy-hour audience","date":"01.07.2022","tags":[{"name":"System Design","slug":"system-design"}],"description":null,"canonicalUrl":"https://oisinbates.com","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"System Design analogies for a happy-hour audience\",\n  \"date\": \"2022-07-01T00:00:00.000Z\",\n  \"tags\": [\"System Design\"],\n  \"slug\": \"/happy-hour-system-design-analogies\",\n  \"canonicalUrl\": \"https://oisinbates.com\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"The workplace \\u2018happy hour\\u2019 is a beloved ritual. The opportunity to meet coworkers in a relaxed setting is a great opportunity for informal discussions on recent projects and ideas. It was in these surroundings that I first found myself creating beverage analogies. My theory in approaching this exercise is that the building blocks of modern web applications are intentionally designed to be easily understood at a high level of abstraction by those without technical backgrounds.\\nIn that spirit, this blog will introduce five technical concepts via happy-hour analogies, before bringing them together in a functional web architecture.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#consistency-vs-availability\"\n  }, \"Analogy One: Consistency versus Availability\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#sharding\"\n  }, \"Analogy Two: Sharding\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#load-balancing-and-queueing\"\n  }, \"Analogy Three: Load Balancing and Queueing\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#caching\"\n  }, \"Analogy Four: Caching\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#web-sockets\"\n  }, \"Analogy Five: Web Sockets\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#example-webapp\"\n  }, \"Example Web Application \"))), mdx(\"h3\", null, \"An introductory thought exercise\"), mdx(\"p\", null, \"Each week many co-workers meet for a happy-hour gathering. People enjoy various drinks, but since I\\u2019m writing this from the Pacific Northwest, I\\u2019m going to pick Kombucha as our running example. Currently in our office we have a few people and a couple of fridges. It\\u2019s pretty easy for everyone to get a drink when they want it. Imagine things were scaled by tens, hundreds, maybe millions: \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"What sort of challenges would we face and how should we deal with them?\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How many unique drinks and flavours can we (or should we) offer?\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"What types of drinks are offered and not offered?\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If multiple people want drinks at the same time, how many concurrent people can we comfortably accommodate at any one time?\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If too many people attempt to access a fridge at one time, how should they queue (eg. is it strictly first-in-first-out or do we have a VIP lane)?\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"What\\u2019s an acceptable/unacceptable wait time for people to get a drink?\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How does the demand for drinks compare at 8am on a Monday versus 4pm on a Friday?\")), mdx(\"h2\", {\n    id: \"consistency-vs-availability\"\n  }, \"Analogy One: Consistency versus Availability\"), mdx(\"p\", null, \"My workspace is an office with multiple rooms and a fridge located a short walk away. It\\u2019s not uncommon for someone to venture to another room to pick up multiple drinks for other people.\\nA scenario we face is that people often aren\\u2019t certain about the exact fridge inventory but take drink requests based on presumptions and the fridge\\u2019s most-recent known inventory (eg. \\u201CThere should be an orange Kombucha in the fridge. Please get one for me if it's available\\u201D). In this scenario we are sacrificing the guarantee that our drink inventory is correct (or \\u2018consistent\\u2019) in favor of being immediately able to take people\\u2019s orders (or be \\u2018available\\u2019) in the moment that people want drinks. Alternatively we could of course check the fridge first to ensure that the inventory is correct, but that would slow things down, sacrificing availability for consistency. \"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"78.75000000000001%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACkklEQVQ4y3VTy04UURDtXzTxLzRx5cbEvUtd8gdmEsgIjA7oggQ0USDAKCRKgJl+3H737cf0Y5gxx5zqaRiMLk73za3q01V1ThnptEaYFrg0FZK8hC4qROkUUdYizqYSD3V+f5+291FawHRcTGwFy/XlW6Ns5vhlKjx/vQY/yYTUdCNYfgzLiwRXpsLl2IbphrCX906gMbYUtre30e/3sbu7Kz81mvlvvN//hsfPXuLo4hLVbIGsbJBXDYpqhqImblcwk3g5W8BSnpBtbGxgONxBqDMYKkjQ/7SPtbd9DPa+yF9CXUg7bqRh+1ELr30zP9A5kqKC6XjY3HyH9fV1fBgOW0LOJ5vWKOtbJJyXLuDFKfw4gxelQmS6ASbKb88qkHigC6ggxtfDY5x9P8fxyZmMyyAZheFA0+WZyMsGjh/j2nKFbKICmSPv8momOWydY5g2i7s7g0T/gqivC/isNskEXqRlJF0BHTp3iMpdsLt8UGXVyJ87FMu3VCc53XcrhHyw9Hq2kEQmcK4UJUjyJbIHiMSXBXRRY9rMBWxdWiaZijQOTs+FKM5LOEEiat7YHsaOL+8by5V58mx5IVSoofwIJ2cjHJ+cYvTjQsxuVLM5fk4cPHn1prVDVoqp+YHlhneCdGQ8M0aVuSG0TK/Xw2AwQJhkMOrbBXrDPTx6+gJ7hyMxLit0oxQqTGQrSEoyKiyxUMNPcoxtha2tLTH2jmxKBoNJ+0cjfPx8iIOj0R1JB3qQq0ewOq4eV1BWz25Xj6Q73eqx75TCLAWhoS2vbblrm9WRmKZm5V0HJLgaW3D8ENemfW+bVWRla1ii3RYtXuTWuGEiwuUSb/OpbkY7dSr/z9gEW6PKXXUUhur/bexV/AG/2aG/DL7yegAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Consistency versus Availability\",\n    \"title\": \"Consistency versus Availability\",\n    \"src\": \"/static/e6677fd88f31306accd76a965bb710ff/7d769/consistency_vs_availability.png\",\n    \"srcSet\": [\"/static/e6677fd88f31306accd76a965bb710ff/5243c/consistency_vs_availability.png 240w\", \"/static/e6677fd88f31306accd76a965bb710ff/ab158/consistency_vs_availability.png 480w\", \"/static/e6677fd88f31306accd76a965bb710ff/7d769/consistency_vs_availability.png 960w\", \"/static/e6677fd88f31306accd76a965bb710ff/87339/consistency_vs_availability.png 1440w\", \"/static/e6677fd88f31306accd76a965bb710ff/16caf/consistency_vs_availability.png 1465w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"The tradeoff here is that in order to guarantee that an order can be fulfilled, the drinks messenger must first confirm that the requested drinks are present in the fridge. This analogy does not translate literally to how a typical web application would work, but the commonality is that strong consistency requires additional steps which in turn impact the speed of delivery. Take the example of a web application with its data hosted across multiple database servers. In order to assure strong consistency, we must ensure that for every database read after a change is written, the latest version of this data will be read. The takeaway here is that in the real world it is typically a choice between prioritising either consistency or availability.\"), mdx(\"h2\", {\n    id: \"sharding\"\n  }, \"Analogy Two: Sharding\"), mdx(\"p\", null, \"Have you ever found yourself blindly rummaging through a fridge or a bucket of drinks to find your desired beverage? It can be inefficient and time-consuming. In our running analogy we currently have a fridge containing multiple drinks. Imagine the number of people and drinks tripled and required additional fridges. With this scale comes new possibilities and new challenges for categorising and distributing drinks across fridges.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"82.91666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAD4klEQVQ4y02UaU8bVxSG/R/7pf+haatKDa0qhTZqpUqJ0kRtlEQpSUOwCYs9mDEQL9gEDMTYAWO8TjCL95mxZ7wvQJKnmmsi5cPRHN13zqtzz3lmbLrZoqLVKWttymoTtW7S7A5o9YYir2oNis0W5bqBbrTEudnpU9XqVHWDYr1NRWvQaHWFZjtKpZA9Xg6376NEJgmsB4VomYa3d1hbXWXzvz95PfecyLs43eGlaMDnD+BfWWbL9QjZ7SJ3fEpvdIUtfpjA6ZLJ7UxwsDGJvBLCaHWEYWjjDW63TGbyZ4JPHhOOvqM3vKRc05BXX7O++JLC02+Q5+2klfzYMBLdx7lgx7syjeSaZ903S6PVEe17vT5mpRmcyy7srpds7mzRG32gVFVxuSRmXQtIksT0nINUThGaLZHKcxqboBC7wXnsW6qJCfTmQMxp922E5B/fE376gPjtG6RWJdpXUFYb7Phkci8m2HZOkZ76geNcmu7oI7bouzihlbtsBqbZ8t1nwz9Doz2k0x/hDwZ58+ghIeciwYd/Ewtt0Lv6REUz8DhfEbPfISTNEP73NkouS9fqsFCuEjvMUdFapJQiiXReLMVo90hmcuxnFQqqzl4yQ/bkXHSuGS0OjtIoRY1Crc7eUQ7VaNHuj7B1Bhf0Ly5p94f0RuPnSbEqoqQ2KFZ1TgoVyrU6p6WaCEuztt0djMRN+lZdbygWabOGbzl3eiPaVlj54EKEVWRttW8VX8dnzXrvy7rWZ0PNaFKqaZybJkW9LkA2uwMhCqhVnTPDpFTTURumKLTGUa7plLW6qCupOo3mmAxbIpnCI8uEn/yGb+45vvXgNYd9Nrd38S46CD+exCM5eRuN0h1eUVF1vP4AXtc8249vIS/OkT0+GXO4H08IltK//oT/2RSyN4jRHIO9vrmJd+YlmVs/4ppbJLwbFXMWYK+t4Z11CM3pmCetXBtGY/u8Wlhg1u3G7X5FyGe//i4H+Hx+HM555pc9eJaeEY346Q4/UqqpSNISs9IizmUZz9ITlPfJMYdHuTyJubvEp3/n/OA7akc30U0L7B5vIxGU6V+IOu/RSH5NKfsCs4eY3W5ARpm6SXz9DkbiK0rnUdpDsEX2D/G+eMCeNMWG7x+CXgdmZ0R3eIE/EGB75i8ia3ZCa/fYi2wxuPxEtW7iXnAQsd8n7JvmtfsuWeV4fOVSVSORzVMxuuTyVZK5U9RGE93skMwoxFLvOSnX2TvIkXl/ht7sUNENjjIK+UqdYs3kIJkXv7YvwP4ggO5fXInZnZVrFCoaFX2Mi5VX6wbFms55RRN6RzBqMTlicHklzCwO/wdVKp+BWy3VoAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Sharding\",\n    \"title\": \"Sharding\",\n    \"src\": \"/static/2abd1d115f60272c9c828f141912b440/7d769/sharding.png\",\n    \"srcSet\": [\"/static/2abd1d115f60272c9c828f141912b440/5243c/sharding.png 240w\", \"/static/2abd1d115f60272c9c828f141912b440/ab158/sharding.png 480w\", \"/static/2abd1d115f60272c9c828f141912b440/7d769/sharding.png 960w\", \"/static/2abd1d115f60272c9c828f141912b440/87339/sharding.png 1440w\", \"/static/2abd1d115f60272c9c828f141912b440/48d3e/sharding.png 1540w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"Take the first scenario of each fridge containing only a single type of drink.\\nIf someone requires only one type, the task of retrieving drinks from the fridge is relatively efficient.\\nThis efficiency diminishes though if the person requires various types and must visit multiple fridges.\\nAlternatively we could stock each individual fridge with an even split of all three drink types, but if 90% of people wanted orange flavour, the utilization of the fridges would not be optimal in this scenario either.\\nIn sharding databases, our challenge is to balance and rebalance partitions of data across multiple locations in as even and efficient a manner as possible.\\nSimilar to our fridge analogy, this is achieved by partitioning our data into smaller groupings, or 'shards'.\"), mdx(\"p\", null, \"Some common techniques for sharding data include:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Regional:\"), \" Usually partitioned by a static location identifier in the data, based on where the data is normally generated and consumed (eg. US East, US West, Canada etc.)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Range:\"), \" Usually based on a primary or composite identifier in the data, and partitioned based on groupings within this range (eg. A-C, D-F, H-J etc.)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Hashing:\"), \" A hashing algorithm is used to randomly distribute data across the available database shards, which can reduce the risk of a disproportionate concentration of traffic (a 'hotspot') being served in one location.\")), mdx(\"h2\", {\n    id: \"load-balancing-and-queueing\"\n  }, \"Analogy Three: Load Balancing and Queueing\"), mdx(\"p\", null, \"Think about the last time you went to an arena sports game or concert. How did you get inside? Chances are you probably entered by one of many entrances based on your ticket. Otherwise, perhaps you were directed to the least-busy entrances. This segregation of people serves to distribute the fans and increases the rate (or \\u2018throughput\\u2019) at which fans can enter and exit the venue. Like in the physical world, load balancers provide a solution for dispersing web traffic across multiple web servers, reducing the risk of congestion in a single spot.\"), mdx(\"p\", null, \"Let\\u2019s continue the analogy of a trip to a game/concert. Once you get inside you might make your way to the bar before queuing again. Were there different queue types? Probably a first-in-first-out queue, but maybe there was also a VIP queue for certain ticket holders.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.333333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACI0lEQVQoz32T204UQRCG58n0Gbz0HYwvYEy89dLEGyOucgFCJFGMMQqogQQ8AWYF3YVd2Nk59hy7Z6Z3dheRz8zIQfFw8ae70lV/VXX9ZSg95F+QRYkqSvLhAVKmfFhZoNVuo/SIMM1qJFmBE2eIPCbLfYwq6DxOyfSQNNO4yQCvu8XdKxeZvHOLbHiI6Qh6tk8gC7a2W6w8myNNTYyT4FMc2xVRVZ2IFV6cE/o2y/ev8255gUANajLTFfRFgrAc9ldXSYvxzwozPfqt1bwcMzqC8REEaUYkC/xIsrNn0vcCIlUQn0DmpIMxxfcjMq0xeolkw3bZdDxCVZAWJa6ImG40eP5kHi9McBNN5HSZuHaZuYeTqPIA0w3oOaJO+Lljst5cQ6a7GHuu4OnaRxbXm3iRxI0kjhfyaH6WpTcLWG5I140J+m2e3LjE/EwDVX7D9kMcESGUxtrZZXN2mkTlGJ9aXV6vbfBi5X39X3p4QChzWh2TfctDJIpYadwwob21iWXbuKGsW+97YY3qPdMlajA+G4rSZxOuHCrSJNN4YYqQmsi3eTxxk1eLL2sZ+VFaJ5P5gI4bseP3UKqHIf+mveN7NhgRqxwryhH72zy4eoGpe7dRw0MsL6ylU7Xc2f7K26kGiQz+1OF5GdW2HuELQXNphvaXJn6S0XP8ejBVy1GUElhOLXjjv1vyy2mLBDvKsYOknmySD4gzXUsnrfyqbSpKfgB1qCnoZunbBAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Load Balancing & Queueing\",\n    \"title\": \"Load Balancing & Queueing\",\n    \"src\": \"/static/1ea4cf1b0b26e995abb965ce23179915/7d769/load_balancing_and_queueing.png\",\n    \"srcSet\": [\"/static/1ea4cf1b0b26e995abb965ce23179915/5243c/load_balancing_and_queueing.png 240w\", \"/static/1ea4cf1b0b26e995abb965ce23179915/ab158/load_balancing_and_queueing.png 480w\", \"/static/1ea4cf1b0b26e995abb965ce23179915/7d769/load_balancing_and_queueing.png 960w\", \"/static/1ea4cf1b0b26e995abb965ce23179915/87339/load_balancing_and_queueing.png 1440w\", \"/static/1ea4cf1b0b26e995abb965ce23179915/eec6c/load_balancing_and_queueing.png 1652w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"These concepts persist also in the design of many of the  web applications that you use. It may be as obvious as entering a virtual queue before talking to a customer support representative, or perhaps less apparent, like your online food order getting processed. At a high level, you can think of the utility of these queues to be directly comparable to queues in the physical world. \"), mdx(\"p\", null, \"As sports arenas direct ticket holders through multiple entrances to achieve efficiency in routing foot traffic, web applications direct online traffic to multiple servers via \\u2018load balancers\\u2019. Like a ticket-holder\\u2019s entrance being determined by their ticket details, the routing of website traffic can be dictated by metadata like a user's IP address or the 'cookies' on their device. There are other possible strategies for routing traffic through load balancers, but at a high level you can think of load balancers as a tool to ensure efficient utilisation of servers by directing web traffic evenly across them.\"), mdx(\"h2\", {\n    id: \"caching\"\n  }, \"Analogy Four: Caching\"), mdx(\"p\", null, \"You can call it many names, but everyone hates having to wait, everyone hates \\u2018latency\\u2019.  Imagine if one flavour of Kombucha was significantly more popular than another. It would make sense to make that the most easily-accessible in our fridge. How about if it was a long walk to the fridge? Perhaps we\\u2019d put a mini fridge closer to our desks and stock it with the most-popular drinks.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"31.666666666666664%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVQY02VQy07CUBTsb/oL7o1bTVy6cmPizrXl1i2U8DBBQQyPAtEQhEBLobfc9pbyTsyYcwtI4mKSOZOTmTlHC+MV5GKN+WqLAycQP51PQXq03GAwctBsdWC1O/jq9pSu0cJMLmB74p/RKa+8V5HPF8CFPBaoftSg60/QdR3pdBoiWkDb7H5QrLVwefegUh1PoDcco29PFL5HLuzpDKaZBWNMGdLewTCVSoExAxkz+2do5Eo4u7iGwwPEq+3xtGjfxBMRmu1P1K0O7AlPDNc71OoNPBsGDMaQMc3EcMwD3Nw/4vzqFsx8gS9jkDaZSYy5gD31VePuwEFv6KLvTOH6IXgYo2G1kSsUUXoto/RWViU0SveDCELGcHkAHszhh7ECcU/IvZZAREvwcK7+TuH0DgKFUPNf4iyzdm3rD6YAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Caching\",\n    \"title\": \"Caching\",\n    \"src\": \"/static/d4d84035ce9e7c637e9da38284bba971/7d769/caching.png\",\n    \"srcSet\": [\"/static/d4d84035ce9e7c637e9da38284bba971/5243c/caching.png 240w\", \"/static/d4d84035ce9e7c637e9da38284bba971/ab158/caching.png 480w\", \"/static/d4d84035ce9e7c637e9da38284bba971/7d769/caching.png 960w\", \"/static/d4d84035ce9e7c637e9da38284bba971/87339/caching.png 1440w\", \"/static/d4d84035ce9e7c637e9da38284bba971/bc21d/caching.png 1633w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"When web applications need to read data, \\u2018caching\\u2019 enables faster retrieval of data than normal database servers. The primary benefit of \\u2018caching\\u2019 data is that it is stored in a server\\u2019s memory, which means the data can be read quicker than if it had to be read from the server\\u2019s disk. You could think of this as comparable to the benefit of pulling your favourite drinks from the front of a fridge\\u2019s shelf versus having to reach to the very back to retrieve them.\"), mdx(\"p\", null, \"Our office mini-fridge analogy introduced the concept of the physical location of a fridge correlating to the speed at which we could retrieve a drink. The physical location of a caching server also contributes to the speed in which we can read data. Indeed, whether data is traveling over the air or a fiber-optic cable, the distance the data must travel will correlate to the speed in which we can receive it. Due to this constraint, cloud vendors like Amazon Web Services offer the ability to cache data at locations in physical proximity to a user base. Say for example we were building an application that recommended the best bars within a five-kilometer radius of a user. There would be a clear benefit in caching Seattle venues from a location in the Pacific Northwest, but less value in caching New York venues in that same physical location. \"), mdx(\"h2\", {\n    id: \"web-sockets\"\n  }, \"Analogy Five: Web Sockets\"), mdx(\"p\", null, \"Let\\u2019s suppose you wanted a drink from another room and needed to phone someone to request it.\\nYou could place a new phone call each time you had a question, or you could stay on the same phone call until the drink is delivered, permitting a two-way conversation with real-time updates.\\nBoth options have pros and cons. For example, if the consumer valued real-time updates on their order, a two-way conversation would be more optimal than multiple short calls.\\nMaintaining a long call is not ideal either if, for example, the messenger only has one phone but needs to accommodate drinks orders from multiple people.\\nLike so many choices in systems design, it is a case of weighing up options to choose the best choice for a given scenario.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"67.5%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACm0lEQVQ4y41TSWtTURR+P6x/QFxYXFj7AxRdKNYSpCWLli5EBCsUBRVcizsXDiCWGGprY0tihiZppvde3jwPycvQ2E/OSRpBEFycd965594zfd8RbD9GNl+G7gYw3BB+nCCIB7D8CHYQw/IimG4wt00vQtgfsu2Q349wWK7D8mOEvQGEfL2Nxftp7BUqOGnJeJ89hGp5kHUHXdNFu6uj2pQg6za6hsPnombh7acMqJiDUg1XVtIcdDj+BaHa6WLx7jqyxyVMzoFCrcWB3LAHJ+hxhZrlzewYXpSgKes4lVS+f3TSwNV7aZSaIpLRBEL66StcvpnC6qNn+HxwDErgRX10DRea7XNl7a4GxXTnlftRgv1CBeWmhNTj57h0YxVrT15wIUKlIaIpqThpitzKx70c2ooBww2gOwG32RAVGA7ZPldcboj48j3P9lGphmK9hR/FKt8XaMAeAdEbIB6MoJgOmrLKs2vJGie70B3F4HNKoNs+wv4AUTJkIElTDIE+/eGYDQpM4v+H0Fj8WSG9wfQ92QJ9aqLClIiT0dxB+l9Cfuos6g8ZrKqocILggjbX17aQOS7OUOwjSkb/rJT8veGYeUsB9otVXHuwiVyljsF4AkEybCylNlBuSaiLKt7tfmNESUTVREeZzpLmJmkWI93q6njzYXde3VJqE6eyNg24sfMaC8u3cGdrm4MQFQhhaunv1qfDH6GjmmjIGm/WysMdLCzfxvr2S6aZkD36iVyxiq+5AtPg7ByMNqFGj//I1KZE/eEZxhPw/UyugINCBZnDPFcv2F4I1XR4X9XZqvGa6TZkzWJNrSuGw/+kqXU6kzQThuPze8sLOZlA7Wm2Nycu8ZA0XaRz+qfVmxLdZ/5NxWM/i+XB9EJG+TcBgfexaJdtkgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Web Sockets\",\n    \"title\": \"Web Sockets\",\n    \"src\": \"/static/43b305753f5348b7d491e3fac6eb5629/7d769/web_sockets_phone_analogy.png\",\n    \"srcSet\": [\"/static/43b305753f5348b7d491e3fac6eb5629/5243c/web_sockets_phone_analogy.png 240w\", \"/static/43b305753f5348b7d491e3fac6eb5629/ab158/web_sockets_phone_analogy.png 480w\", \"/static/43b305753f5348b7d491e3fac6eb5629/7d769/web_sockets_phone_analogy.png 960w\", \"/static/43b305753f5348b7d491e3fac6eb5629/87339/web_sockets_phone_analogy.png 1440w\", \"/static/43b305753f5348b7d491e3fac6eb5629/22c6c/web_sockets_phone_analogy.png 1684w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"Similar to our phone analogy, when you are using an internet-connected application it will communicate with servers via comparable web protocols.\\nOur first option is a standard Hypertext Transfer Protocol (HTTP) connection.\\nThis is a unidirectional request for information from our devices (also known as a \\u2018client\\u2019) to a web server.\\nLike phone calls, these are typically short requests for information.\\nOur second option is a \\u2018WebSocket\\u2019 connection which enables a single connection with multidirectional communication between client and server.\\nIf you have ever used an app that showed you real-time updates such as someone\\u2019s location or that another user is currently typing a message, you have probably benefited from a WebSocket connection.\"), mdx(\"h2\", {\n    id: \"example-webapp\"\n  }, \"Example Web Application\"), mdx(\"p\", null, \"Finally, we can merge all of the previous analogies together into a single architecture. Let\\u2019s create a simple app with the following requirements, to coordinate the tasks of requesting and delivering drinks:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Users can use the app to both request drinks and to accept other users\\u2019 drink requests.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We will refer to the users requesting drinks as \\u2018consumers\\u2019 and those delivering drinks as \\u2018messengers\\u2019.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"From within the app, users can toggle their availability off and on. If they are available to fetch drinks, they will be sent drink requests that they can accept or refuse via the app.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If a request is not successfully paired with a messenger within three minutes, the request will terminate with the drink consumer notified to try again later.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The maximum number of drinks requestable is four. This limitation is intentional, so that orders can be easily carried by the drinks messengers.\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"46.666666666666664%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABc0lEQVQoz11Su24cMQzc//+ZtG7SOVXqAFcYTuLXvrR6k3qs7THI2ztcUggkJHE4HM4QqSJyhUsMn4vG23xxEatLmLeAcXWYjP/nbto8EjHGeUFtHcOb8XhdHQT4FkjiFjLeVgebGCZkBZEjuY2E0XjMNiBmxrI55NIw3P34iW/f75G4aaGNZ4YuF1Bt4NoU/HK4dtS+I3HFbOPRmDSXmuH0+xm/Hv7A+KQsqfYry/ePD3x+QllMW9BIXMAs74SnyShTqfOJldRAdVeQl8XCxQwi1lGlOGVWAC04GEouowWqqqU05lIRYkKpHYPo93cyqk2kgkwFQRkWFbnvO4w/9PNS1NB6R8iM18UqQwGVd2ky3N2fNRSW9r9N9/1dxxbGsogtEkrraH1HoKILk/8Cuvqs+XB6fMbp8QmR2xXouu1IahMBFHZiEzky6sUBsumQCONiQLJlETIdYBedbu2jNvFnu4jnFhuOu6zAorXINM6rsv8CZD6uoe+HTAcAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Example Web App Architecture\",\n    \"title\": \"Example Web App Architecture\",\n    \"src\": \"/static/a8ffa7b9b38cb00ccfa5ab6eb058008e/7d769/example_webapp_architecture.png\",\n    \"srcSet\": [\"/static/a8ffa7b9b38cb00ccfa5ab6eb058008e/5243c/example_webapp_architecture.png 240w\", \"/static/a8ffa7b9b38cb00ccfa5ab6eb058008e/ab158/example_webapp_architecture.png 480w\", \"/static/a8ffa7b9b38cb00ccfa5ab6eb058008e/7d769/example_webapp_architecture.png 960w\", \"/static/a8ffa7b9b38cb00ccfa5ab6eb058008e/87339/example_webapp_architecture.png 1440w\", \"/static/a8ffa7b9b38cb00ccfa5ab6eb058008e/88b03/example_webapp_architecture.png 1920w\", \"/static/a8ffa7b9b38cb00ccfa5ab6eb058008e/607e1/example_webapp_architecture.png 2932w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"The above brings together our previous analogies:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Users are first routed through a load balancer which relays their traffic to an available web server\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Information on locally-available drinks can be loaded via the cache\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Precise drink inventory is tracked via a database which is sharded based on the regions that drinks are located in.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A WebSocket connection is favoured to prioritise real-time updates for drink requests.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"New drinks requests are placed into a queue which is used by two 'matchmaker 'services that attempt to match drink consumers with drink messengers. A request is removed from the queue if it is completed, canceled, or three minutes pass without a messenger accepting the request.\")), mdx(\"h2\", null, \"Conclusion\"), mdx(\"p\", null, \"An appropriate quote to draw us towards conclusion is from the philosopher Alfred Korzybski, who stated that \\\"the map is not the territory\\\".\\nThis blog's diagrams and analogies all represent visual and logical abstractions of topics that could be dissected in far greater granularity.\\nThe beauty here is that the building blocks of the internet, while certainly complicated at a more-granular level, can be understood at multiple levels of abstraction.\\nWhether you are coming from a technical or non-technical background, I hope that you have gained a new perspective from this blog, or at the very least some new ideas for your next workplace happy hour.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"The workplace ‘happy hour’ is a beloved ritual. The opportunity to meet coworkers in a relaxed setting is a great opportunity for informal…","timeToRead":8,"banner":null}},"pageContext":{"slug":"/happy-hour-system-design-analogies","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["2744905544","3090400250","318001574"]}